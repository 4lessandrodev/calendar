"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createManyDomainInstances = exports.Class = void 0;
const validator_1 = require("../utils/validator");
const iterator_1 = require("./iterator");
const result_1 = require("./result");
const Class = (domainClass, props) => {
    return {
        class: domainClass,
        props
    };
};
exports.Class = Class;
const createManyDomainInstances = (data) => {
    const results = [];
    if (validator_1.default.isArray(data)) {
        for (let index = 0; index < data.length; index++) {
            const existsCreateMethod = typeof data[index]?.class?.create === 'function';
            if (!existsCreateMethod) {
                results.push(result_1.default.fail(`there is no static method create in ${data[index].class?.name} class`));
                continue;
            }
            ;
            const payload = data[index].class.create(data[index].props);
            results.push(payload);
        }
    }
    const iterator = iterator_1.default.create({ initialData: results, returnCurrentOnReversion: true });
    const result = result_1.default.combine(results);
    return { data: iterator, result };
};
exports.createManyDomainInstances = createManyDomainInstances;
exports.default = exports.createManyDomainInstances;
//# sourceMappingURL=create-many-domain-instance.js.map